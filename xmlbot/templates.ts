import { parseStringPromise } from 'xml2js';
import fs from 'fs';
import { findTemplates } from '../bot/wiki/newTemplateParser';

const templates = [
    "בגד",
    "בושם",
    "ויקיפדיה בשפה",
    "מידע עיטור",
    "מלוכה",
    "מעבר גבול",
    "משחק",
    "פארק שעשועים",
    "פרס",
    "צבע",
    "קשרים",
    "אולימפיאדה",
    "אולימפיאדת שחמט",
    "אונייה",
    "אופרה",
    "אחווה",
    "אי",
    "איזוטופ",
    "אירוויזיון",
    "אירוע",
    "אישיות בודהיסטית",
    "אישיות ביטחונית",
    "אישיות בייסבול",
    "אישיות כדורגל",
    "אישיות כדורגל2",
    "אישיות כדוריד",
    "אישיות כדורסל",
    "אישיות משחק",
    "אישיות פוטבול",
    "אישיות רבנית",
    "אישיות תנ\"כית",
    "אישיות תקשורת",
    "אל",
    "אלבום",
    "אלגוריתם",
    "אליפות העולם בהוקי קרח",
    "אליפות העולם בשחמט",
    "אמן",
    "אנטומיה",
    "אסון טבע",
    "אסון תחבורה",
    "אצטדיון",
    "ארגון",
    "ארגון פרה-מיליטרי",
    "אתר אינטרנט",
    "אתר ארכאולוגי",
    "בגד",
    "בורסה",
    "בושם",
    "בית חולים",
    "בית מלון",
    "בית משפט",
    "בית קברות",
    "בנק מרכזי",
    "בעל חיים מפורסם",
    "גאוגרפיה של מדינה",
    "גבול",
    "גוף מים",
    "גוף פלנטרי",
    "גזע",
    "גזע בדיוני",
    "גלקסיה",
    "דמוגרפיה של מדינה",
    "דמות בדיונית",
    "דרגה צבאית",
    "דרך",
    "דתות וזרמים",
    "הורמון",
    "החלטה של האומות המאוחדות",
    "המנון",
    "הסכם",
    "הפלגה",
    "הר",
    "הרכב מחול",
    "ויקיפדיה בשפה",
    "ועדה פרלמנטרית",
    "ועידה",
    "זיכיון",
    "חבל ארץ בדיוני",
    "חברה מסחרית",
    "חברה מסחרית/חברת תעופה",
    "חג",
    "חומצת אמינו",
    "חוק",
    "חללית",
    "טייס חלל",
    "טיל",
    "טניסאי",
    "טקס פרסי קולנוע",
    "יבשת",
    "יחידה צבאית",
    "יסוד כימי",
    "יצירה מוזיקלית",
    "יצירת אמנות",
    "כוכב",
    "כלי נגינה",
    "כלי רכב",
    "כלכלת מדינה",
    "ליגה",
    "מאבק אזרחי",
    "מאכל",
    "מבנה",
    "מבנה צבאי",
    "מגלה ארצות",
    "מגפה",
    "מדינה",
    "מדינה באירוויזיון",
    "מדינה במלחמה",
    "מדען",
    "מוזיקאי",
    "מוזיקה",
    "מוסד לימודי",
    "מושב פרלמנט",
    "מזהה",
    "מחזה",
    "מחלה",
    "מחלף",
    "מחנה ריכוז",
    "מחשב",
    "מטבע",
    "מטוס",
    "מידע דגל",
    "מידע סמל",
    "מידע עיטור",
    "מידע קונסולת משחקים",
    "מינרל",
    "מלוכה",
    "ממצא ארכאולוגי",
    "מנהיג",
    "מנהיג/שושלת",
    "מנוע רקטי",
    "מעבד",
    "מעבד גרפי",
    "מעבר גבול",
    "מעיין",
    "מערה",
    "מערכת הפעלה",
    "מפל מים",
    "מפלגה",
    "מצפה כוכבים",
    "מרגל",
    "מרוץ אופניים",
    "מרכז זואולוגי",
    "משאל עם",
    "משגר",
    "משחק",
    "משחק ספורט",
    "משימת חלל",
    "משפחת שפות",
    "משפט מתמטי",
    "משפטן",
    "משקה",
    "משרה",
    "מתאבק",
    "מתקן שעשועים",
    "נאום",
    "נבחרת הוקי קרח לאומית",
    "נבחרת טניס",
    "נבחרת לאומית",
    "נהג מרוצים",
    "נהר",
    "ניב משפטי",
    "נמל",
    "נציגות דיפלומטית",
    "נק\"ל",
    "סגנון אדריכלות",
    "סוג קובץ",
    "סוכנות ממשלתית",
    "סופר",
    "סורה",
    "סיבוב הופעות",
    "סיומת אינטרנט",
    "סינגל",
    "סירה",
    "סכסוך צבאי",
    "סכר",
    "סלע",
    "ספורטאי",
    "ספר",
    "ספר תנ\"כי",
    "ספר/מהדורה",
    "ספרייה",
    "סרט",
    "עונה בספורט המוטורי",
    "עונה של מועדון כדורגל",
    "עונת KHL",
    "עונת MLB",
    "עונת NBA",
    "עיר",
    "עיתון",
    "עמק",
    "ערוץ",
    "פארק",
    "פארק שעשועים",
    "פדרציית ספורט",
    "פיגוע טרור",
    "פילוסוף",
    "פסטיבל",
    "פסק דין",
    "פעיל ניו מדיה",
    "פרוטוקול תקשורת",
    "פרלמנט",
    "פרס",
    "פרק טלוויזיה",
    "פתיחת שחמט",
    "צבא",
    "צבע",
    "צופן בלוקים",
    "ציוד צבאי",
    "צינור",
    "קבוצה אתנית",
    "קבוצת אופניים",
    "קבוצת בייסבול",
    "קבוצת הוקי קרח",
    "קבוצת כדורגל",
    "קבוצת כדוריד",
    "קבוצת כדורמים",
    "קבוצת כדורסל",
    "קבוצת כדורעף",
    "קבוצת פוטבול",
    "קבוצת פורמולה 1",
    "קבוצת רוגבי",
    "קבינט",
    "קבר",
    "קדוש נוצרי",
    "קו רכבת",
    "קומיקס",
    "קוקטייל",
    "קרוסאובר בדיוני",
    "קרחון",
    "קשרים",
    "רוכב אופנוע",
    "רוכב אופניים",
    "רופא",
    "רכב חלל",
    "רק\"ם",
    "שבט צופים תנועת נוער",
    "שדה נפט",
    "שדה תעופה",
    "שושלת",
    "שחמטאי",
    "שכונה",
    "שף",
    "שפה",
    "שפת תכנות",
    "תבנית מידע/אתר מורשת",
    "תוכנה",
    "תוכנית טלוויזיה",
    "תזמורת",
    "תחנת חלל",
    "תחנת רדיו",
    "תחנת רכבת",
    "תחרות אולימפית",
    "תחרות כדורגל",
    "תחרות כדורסל",
    "תחרות ספורט",
    "תמונה להחלפה",
    "תמונות קולאז'",
    "תנועת נוער",
    "תערובת",
    "תערוכה",
    "תקופה",
    "תקיפה צבאית",
    "תרופה",
    "תרכובת",
    "אישיות",
    "אישיות בודהיסטית",
    "אישיות ביטחונית",
    "אישיות משחק",
    "אישיות רבנית",
    "אישיות תנ\"כית",
    "אמן",
    "אישיות תקשורת",
    "חסיד אומות העולם",
    "טייס חלל",
    "מגלה ארצות",
    "מדען",
    "מוזיקאי",
    "משתמש:Shinaimm/מנהיג",
    "מנהיג",
    "מרגל",
    "משפטן",
    "סופר",
    "עץ משפחה לאדם אחד",
    "פילוסוף",
    "פעיל ניו מדיה",
    "קדוש נוצרי",
    "רופא",
    "שף",
    "אישיות בייסבול",
    "אישיות כדורגל",
    "אישיות כדורגל2",
    "אישיות כדוריד",
    "אישיות כדורסל",
    "אישיות פוטבול",
    "טניסאי",
    "מתאבק",
    "נהג מרוצים",
    "ספורטאי",
    "רוכב אופנוע",
    "רוכב אופניים",
    "שופט כדורגל",
    "שחמטאי",
    "הרכב מחול",
    "יצירת אמנות",
    "משתמש:מקף־עברי/יצירה מוזיקלית",
    "יצירת אמנות במרחב הציבורי בישראל בשורה",
    "מחזה קלאסי",
    "מחזה",
    "סיבוב הופעות",
    "תערוכה",
    "חודשים",
    "מיון",
    "מיון/קבוצה",
    "בעל חיים מפורסם",
    "גזע",
    "מיון",
    "מיון/קבוצה",
    "מרכז זואולוגי",
    "קלייד",
    "אי",
    "אסון טבע",
    "אקלים",
    "אתר ארכאולוגי",
    "אתר מורשת בישראל בשורה",
    "אתר מורשת בישראל כותרת",
    "אתר מורשת בישראל סטטי בשורה",
    "אתר מורשת בישראל סטטי כותרת",
    "תבנית מידע/אתר מורשת",
    "גבול",
    "הר",
    "יבשת",
    "גוף מים",
    "מבנה",
    "גאוגרפיה של מדינה",
    "מספר יישוב",
    "מעיין",
    "מערה",
    "מפל מים",
    "מפלס הכנרת",
    "מפלס ים המלח",
    "מפת מיקום מוויקינתונים",
    "נהר",
    "סוג יישוב",
    "סכר",
    "עמק",
    "פארק",
    "קרחון",
    "מידע דגל",
    "פסקת דמוגרפיה",
    "המנון",
    "יחסי מדינות",
    "מדינה",
    "מדינה במלחמה",
    "מדינה/אוכלוסייה",
    "מדינה/צפיפות",
    "סוכנות ממשלתית",
    "מידע סמל",
    "עיר",
    "קבינט",
    "תמ\"ג מדינה",
    "אוניית מעפילים",
    "הנהגה בישראל",
    "מיקום מפורט בישראל",
    "יישוב בישראל",
    "יישוב בישראל/1",
    "עיר",
    "Demography 4col",
    "Demography 5col",
    "Demography 6col",
    "Demography 7col",
    "Demography 12col",
    "דרך",
    "יישוב בישראל",
    "יישוב בישראל/1",
    "מיקום מפורט בישראל",
    "נתוני שכונות תל אביב",
    "סטטיסטיקה עירונית",
    "עיר תאומה",
    "קיבוץ משולב בבוט היישובים",
    "שכונה",
    "אי",
    "אסון טבע",
    "אסון תחבורה",
    "אצטדיון",
    "אתר ארכאולוגי",
    "תבנית מידע/אתר מורשת",
    "בית מלון",
    "בית קברות",
    "דרך",
    "הר",
    "חברה מסחרית",
    "גוף מים",
    "יצירת אמנות",
    "משתמש:מקף־עברי/יצירה מוזיקלית",
    "מבנה",
    "מבנה צבאי",
    "מדינה",
    "מוסד לימודי",
    "מחנה ריכוז",
    "ממצא ארכאולוגי",
    "מעיין",
    "מערה",
    "מפל מים",
    "מצפה כוכבים",
    "מרכז זואולוגי",
    "נמל",
    "סכסוך צבאי",
    "סכר",
    "ספרייה",
    "עיר",
    "עמק",
    "פארק",
    "פארק שעשועים",
    "פסטיבל",
    "פרלמנט",
    "קבר",
    "קרחון",
    "שדה נפט",
    "שדה תעופה",
    "מידע סמל",
    "סוג דגל",
    "אישיות בודהיסטית",
    "אל",
    "דתות וזרמים",
    "חג",
    "קבר",
    "אישיות רבנית",
    "סוגיה",
    "פרשת שבוע",
    "אירוע",
    "ארגונים פוליטיים בולטים המזוהים עם הלאומנים במלחמת האזרחים בספרד",
    "ארגונים פוליטיים בולטים המזוהים עם הרפובליקנים במלחמת האזרחים בספרד",
    "הפיגוע יצא מ",
    "ועידה",
    "חלוקת כוחות הביטחון בין הצדדים הלוחמים עם פרוץ המלחמה",
    "כלי טיס בחיל האוויר הרפובליקני והלאומני במלחמה",
    "כלי שיט בצי הרפובליקני והלאומני במלחמה",
    "מאבק אזרחי",
    "מלחמת האזרחים בסוריה תבנית מידע",
    "ממצא ארכאולוגי",
    "מפקד האוכלוסין של ארצות הברית",
    "מקורות המימון העיקריים של הצדדים הלוחמים",
    "סגנון אדריכלות",
    "פיגוע טרור",
    "ציוד צבאי שנשלח במהלך המלחמה לצדדים הלוחמים",
    "שושלת",
    "תוצאות הבחירות לפרלמנט בשנות הרפובליקה השנייה",
    "תקופה",
    "מחנה ריכוז",
    "הסכם",
    "זכויות להט\"ב",
    "חוק",
    "ניב משפטי",
    "פסק דין",
    "אגודת סטודנטים",
    "מוסד לימודי",
    "ספרייה",
    "תוכנית לימודים",
    "שבט צופים תנועת נוער",
    "תנועת נוער",
    "אישיות משחק",
    "אנימהמאנגה",
    "דמות בדיונית",
    "סדרת סרטים",
    "סדרת סרטים/סרט",
    "סדרת סרטים/כותרת",
    "סדרת סרטים/ריק",
    "סרט",
    "ערוץ",
    "פרק טלוויזיה",
    "קרוסאובר בדיוני",
    "תוכנית טלוויזיה",
    "אישיות רבנית",
    "סוגיה",
    "פרשת שבוע",
    "כלכלת מדינה",
    "ארגון",
    "בורסה",
    "בית מלון",
    "חברה מסחרית",
    "חברות מאיה",
    "מבנה",
    "מטבע",
    "נמל",
    "פסטיבל",
    "צינור",
    "שדה נפט",
    "שווי שוק חברה בורסאית",
    "שווי שוק חברה בורסאית (ארצות הברית)",
    "אלפבית אורדו",
    "אלפבית דוונאגרי",
    "אלפבית יווני",
    "אלפבית לטיני",
    "אלפבית עברי",
    "אלפבית ערבי",
    "אלפבית קירילי",
    "היראגאנה",
    "משפחת שפות",
    "סימני פיסוק",
    "קטאקאנה",
    "שורש קאנגשי סיני",
    "שפה",
    "תנועות",
    "תעתיק בטורקית",
    "אצטדיון",
    "בית חולים",
    "בית מלון",
    "בית משפט",
    "בית קברות",
    "מבנה",
    "מבנה צבאי",
    "מוסד לימודי",
    "מחלף",
    "נמל",
    "נציגות דיפלומטית",
    "סגנון אדריכלות",
    "סכר",
    "ספרייה",
    "שדה תעופה",
    "יסוד כימי/טבלה מחזורית/פורמט",
    "Chem2",
    "איזוטופ",
    "הורמון",
    "חומצת אמינו",
    "יסוד כימי",
    "תערובת",
    "תא יסוד",
    "תרכובת",
    "גוף פלנטרי",
    "גלקסיה",
    "חללית",
    "טייס חלל",
    "כוכב",
    "כוכב/מרחק/1",
    "מטר מטאורים",
    "מנוע רקטי",
    "מצפה כוכבים",
    "משגר",
    "משימת חלל",
    "נטייה",
    "עלייה ישרה",
    "קבוצת כוכבים",
    "רכב חלל",
    "מידע חלקיק",
    "יחידת סלע",
    "מינרל",
    "סלע",
    "אמן",
    "סופר",
    "פילוסוף",
    "קבוצה אתנית",
    "אופרה",
    "אירוויזיון",
    "אלבום",
    "גרף מיקומי מצעד",
    "דיסקוגרפיה",
    "דיסקוגרפיה/תיעוד",
    "דירוגים",
    "הכירו את",
    "הצבעת אירוויזיון",
    "הצבעת שופטים-קהל באירוויזיון",
    "יצירה מוזיקלית",
    "כלי נגינה",
    "כרונולוגיה",
    "להקה צבאית",
    "מדינה באירוויזיון",
    "מוזיקאי",
    "מוזיקה",
    "מיקומי שיא1",
    "מיקומי שיא",
    "ממפ",
    "נתוני מכירות",
    "סולם",
    "סטנדרט",
    "סינגל",
    "סינגל באלבום",
    "סינגלי אלבום",
    "סינגלים",
    "פילוג הצבעות באירוויזיון",
    "פירוט דיסקוגרפיה",
    "פריט סינגל",
    "קיטלוגים למוזיקה קלאסית שורה",
    "רשימת השמעה",
    "שנה במוזיקה",
    "שנה בפרסי המוזיקה הבריטית",
    "תזמורת",
    "אירוויזיון 1956",
    "אירוויזיון 1957",
    "אירוויזיון 1958",
    "אירוויזיון 1959",
    "אירוויזיון 1960",
    "אירוויזיון 1961",
    "אירוויזיון 1970",
    "אירוויזיון 1998",
    "אירוויזיון 2003",
    "אירוויזיון 2012",
    "אירוויזיון 2013",
    "אירוויזיון 2014",
    "אירוויזיון 2015",
    "אירוויזיון 2016",
    "אירוויזיון 2017",
    "אירוויזיון 2018",
    "אירוויזיון 2019",
    "אירוויזיון 2020",
    "אירוויזיון 2021",
    "אירוויזיון 2022",
    "אירוויזיון 2023",
    "אירוויזיון 2024",
    "אירוויזיון 2025",
    "מאכל",
    "משקה",
    "ערך תזונתי",
    "קוקטייל",
    "אלגוריתם",
    "פרוטוקול תקשורת",
    "אתר אינטרנט",
    "מחשב",
    "מידע קונסולת משחקים",
    "מעבד גרפי",
    "מערכת הפעלה",
    "משחק",
    "סוג קובץ",
    "סיומת אינטרנט",
    "רשת IRC",
    "שפת תכנות",
    "תוכנה",
    "ויקיפדיה:יצירה על פי תבנית/בסיס לתבנית פרמטרית",
    "מספר שלם",
    "משפט מתמטי",
    "נתוני גרף",
    "נתוני התפלגות",
    "אולימפיאדה",
    "קבוצת אופניים",
    "אמנות לחימה",
    "אצטדיון",
    "משחק ספורט",
    "טורניר גראנד סלאם (טניס)",
    "אליפות העולם בהוקי קרח",
    "קבוצת הוקי קרח",
    "המכרז האולימפי 2020",
    "טבלת כדורגל",
    "טבלת משחקי גמר של גביע אירופה וליגת האלופות",
    "טורניר טניס ATP",
    "טורניר טניס WTA",
    "טורניר טניס משולב",
    "קבוצת כדוריד",
    "קבוצת כדורעף",
    "ליגה",
    "מדינה במשחקים האולימפיים",
    "מדליות באליפות אירופה באתלטיקה 2022",
    "מדליות באליפות אירופה באתלטיקה 2022/זמן",
    "מדליות באליפות אירופה באתלטיקה 2022/תמצית",
    "מספר מדינות במוקדמות המונדיאל",
    "מקרא תוארי טניס",
    "מרוץ אופניים",
    "משחק כדורגל",
    "נבחרת",
    "נבחרת במונדיאל",
    "נבחרת טניס",
    "נבחרת לאומית",
    "נבחרת הוקי קרח לאומית",
    "סגל קבוצת אופניים",
    "סגל קבוצת כדורסל",
    "סופרבול",
    "עונת KHL",
    "עונת MLB",
    "עונת NBA",
    "עונה בספורט המוטורי",
    "פדרציית ספורט",
    "קבוצות אופניים במרוץ",
    "קבוצת בייסבול",
    "קבוצת כדורגל",
    "קבוצת כדורמים",
    "קבוצת כדורסל",
    "קבוצת פוטבול",
    "קבוצת פורמולה 1",
    "קבוצת רוגבי",
    "אליפות העולם בשחמט",
    "אולימפיאדת שחמט",
    "פתיחת שחמט",
    "שחקן כדורסל",
    "שחקן נבחרת",
    "שחקן נבחרת התחלה",
    "שחקן סגל",
    "תוצאות אולימפיאדה",
    "תוצאות משחקי ליגת העל הרוסית בכדורגל 2020/2021",
    "תחרות אולימפית",
    "תחרות כדורגל",
    "תחרות כדורסל",
    "תחרות ספורט",
    "אישיות בייסבול",
    "אישיות כדורגל",
    "אישיות כדורגל2",
    "אישיות כדוריד",
    "אישיות כדורסל",
    "אישיות פוטבול",
    "טניסאי",
    "מתאבק",
    "נהג מרוצים",
    "ספורטאי",
    "רוכב אופנוע",
    "רוכב אופניים",
    "שופט כדורגל",
    "שחמטאי",
    "אנימהמאנגה",
    "גזע בדיוני",
    "חבל ארץ בדיוני",
    "כתב יד",
    "נאום",
    "סופר",
    "סורה",
    "ספר",
    "ספר תנ\"כי",
    "עיתון",
    "קומיקס",
    "בחירות",
    "בחירות8",
    "בחירות9",
    "בחירות בישראל",
    "בחירות בישראל/מפלגות",
    "בחירות בישראל/ראש ממשלה",
    "הנהגה בישראל",
    "ועדה פרלמנטרית",
    "מפלגה",
    "משאל עם",
    "סוכנות ממשלתית",
    "מושב פרלמנט",
    "פרלמנט",
    "קבינט",
    "רשימה לכנסת",
    "תוצאות בחירות",
    "כוחות מזוינים",
    "צבא",
    "אונייה",
    "ארגון פרה-מיליטרי",
    "דרגה צבאית",
    "טיל",
    "רק\"ם",
    "יחידה במלחמה",
    "יחידה צבאית",
    "מבנה צבאי",
    "נק\"ל",
    "סכסוך צבאי",
    "ציוד צבאי",
    "בית חולים",
    "גן",
    "מגפה",
    "מחלה",
    "שריר",
    "תרופה",
    "תבנית מידע/אתר אינטרנט",
    "תבנית מידע/טבלת ניווט",
    "תבנית מידע/לידה ופטירה לאישים",
    "תבנית מידע/מאזן מדליות",
    "תבנית מידע/מפה",
    "תבנית מידע/תלבושת",
    "קרוסאובר בדיוני/פרק",
    "קריירת נהג מרוצים",
    "קריירת רוכב אופנוע",
    "שלב במשגר",
    "תפקיד מנהיג",
    "תפקידים מוויקינתונים",
    "אירוויזיון/קישורים",
    "אירוויזיון/שם",
    "אלבום/רקע",
    "גוף פלנטרי/רקע",
    "דמוגרפיה של מדינה/שם",
    "חברה מסחרית/קטגוריה",
    "חודשים",
    "כוכב/מילה מספר",
    "כרונולוגיה/סוג ברבים",
    "מדינה/אוכלוסייה",
    "מדינה/צפיפות",
    "מפלגה/מדינה בפרלמנט האירופי",
    "מפלגה/מושבים לפי פרלמנט",
    "מפלגה/צבע רקע",
    "משחק/רקע",
    "נבחרת/ענף",
    "סיבוב הופעות/רקע",
    "סינגל/רקע",
    "עיר/סיווג מדינה",
    "עיר/ראש ישות",
    "פסקת דמוגרפיה",
    "פעיל ניו מדיה/צבע",
    "פרמטר שם בשפת המקור",
    "קו רכבת/לבן",
    "אונייה",
    "אוניית מעפילים",
    "אסון תחבורה",
    "מעורב באסון תחבורה",
    "דרך",
    "הפלגה",
    "חללית",
    "כלי רכב",
    "מחלף",
    "מטוס",
    "סירה",
    "רכב חלל",
    "שדה תעופה",
    "קו רכבת/איסטנבול",
    "קו רכבת/אמסטרדם",
    "קו רכבת/אנקרה",
    "קו רכבת/בואנוס איירס",
    "קו רכבת/בודפשט",
    "קו רכבת/ברלין",
    "קו רכבת/גוש דן",
    "קו רכבת/דוחה",
    "קו רכבת/הונג קונג",
    "קו רכבת/וושינגטון",
    "קו רכבת/וינה",
    "קו רכבת/ורשה",
    "קו רכבת/חרקוב",
    "קו רכבת/טביליסי",
    "קו רכבת/טבלה",
    "קו רכבת/ניווט",
    "קו רכבת/טוקיו",
    "קו רכבת/טשקנט",
    "קו רכבת/ירושלים",
    "קו רכבת/לונדון",
    "קו רכבת/מדריד",
    "קו רכבת/מוסקבה",
    "קו רכבת/מקסיקו סיטי",
    "קו רכבת/נובוסיבירסק",
    "קו רכבת/סאו פאולו",
    "קו רכבת/סופיה",
    "קו רכבת/סנקט פטרבורג",
    "קו רכבת/קייב",
    "קו רכבת/צבע",
    "קו רכבת/שנג'ן",
    "משפחת שפות",
    "נאום",
    "עיתון",
    "ערוץ",
    "שפה",
    "תחנת רדיו"
  ]


type Page = {
    title?: string[];
    id?: string[];
    ns?: string[];
    redirect?: any;
    revision?: {
        id?: string[];
        parentid?: string[];
        timestamp?: string[];
        contributor?: {
          username?: string[];
          id?: string[];
        }[];
        comment?: string[];
        origin?: string[];
        model?: string[];
        format?: string[];
        text?: {
          _: string;
          $?: {
            bytes?: string;
            sha1?: string;
            'xml:space'?: string;
          };
        }[];
        sha1?: string[];
    }[];
  };

  async function main() {
    const templatesCount: Record<string, number> = {};
    let pagesCount = 0;
    for (let i = 0; i <= 17; i += 1) {
      const chunk = fs.readFileSync(`./data${i}.xml`, 'utf-8');
      const xml = await parseStringPromise(`<xml>${chunk}</xml>`);
      console.log('Processing chunk', i);
      xml.xml.page.forEach((page: Page) => {
        pagesCount += 1;
        let text = page.revision?.[0]?.text?.[0]?._ || '';
        const title = page.title?.[0] || '';
        const ns = page.ns?.[0] || '';
        if (!text || !title || ns !== '0') {
          return;
        }
        for (const template of templates) {
          const templates = findTemplates(text, template, title);
          if (templates.length > 0) {
            templatesCount[template] = (templatesCount[template] || 0) + 1;
          }
        }
      });
    console.log('chunk', i, 'done');
  }
   fs.writeFileSync('templatesCount.json', JSON.stringify(templatesCount, null, 2));
}

main();